{"version":3,"sources":["firebase.js","Auth.js","Chat.js","index.js"],"names":["firebase","apps","length","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","database","auth","googleProvider","GoogleAuthProvider","Auth","state","user","handleLogin","signInWithPopup","console","log","_this2","this","onAuthStateChanged","setState","children","props","react_default","a","createElement","Button","onClick","Component","Chat","messages","add","avatar","email","name","handleChange","e","_this","target","value","handleSubmit","text","currentUser","photoURL","displayName","newMessage","ref","push","handleLogout","signOut","on","snapshot","obj","res","Object","entries","map","_ref","_ref2","slicedToArray","key","objectSpread2","obj2Arr","val","_this$state","Fragment","List","_ref3","ListItem","ListItemAvatar","Avatar","src","ListItemText","primary","secondary","TextField","onChange","rootElement","document","getElementById","ReactDOM","render","StrictMode","src_Auth","src_Chat"],"mappings":"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","file":"static/js/main.455b2fb4.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport \"firebase/auth\";\n\nconst config = {\n  apiKey: \"AIzaSyD9ST0dfmCehXtFOSwMWO-Bz3YxC57R2KQ\",\n  authDomain: \"chat-adb94.firebaseapp.com\",\n  databaseURL: \"https://chat-adb94.firebaseio.com\",\n  projectId: \"chat-adb94\",\n  storageBucket: \"chat-adb94.appspot.com\",\n  messagingSenderId: \"446706223198\",\n  appId: \"1:446706223198:web:e6029666b8758e760d8ccf\",\n  measurementId: \"G-B23WETLEWL\",\n};\n\n// firebase.initializeApp(config);\n!firebase.apps.length ? firebase.initializeApp(config) : firebase.app();\n\nexport const database = firebase.database();\nexport const auth = firebase.auth();\nexport const googleProvider = new firebase.auth.GoogleAuthProvider();\nexport default firebase;\n","import React, { Component } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { auth, googleProvider } from \"./firebase.js\";\n\nclass Auth extends Component {\n  state = {\n    user: null,\n  };\n  componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      this.setState({ user });\n    });\n  }\n\n  handleLogin = () => {\n    auth.signInWithPopup(googleProvider);\n    console.log(\"login\");\n  };\n\n  render() {\n    const { user } = this.state;\n    const { children } = this.props;\n    const { handleLogin } = this;\n    return user ? children : <Button onClick={handleLogin}>LogIn</Button>;\n  }\n}\n\nexport default Auth;\n","import React, { Component } from \"react\";\nimport { database, auth } from \"./firebase.js\";\nimport {\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Button,\n  ListItemAvatar,\n  Avatar,\n} from \"@material-ui/core\";\nimport \"./styles.css\";\n\n//firebase helper\nconst obj2Arr = (obj) => {\n  let res = [];\n  Object.entries(obj || {}).map(([key, value]) => {\n    return res.push({ ...value, key });\n  });\n  return res;\n};\n\nclass Chat extends Component {\n  state = {\n    messages: [],\n    add: \"\",\n    avatar: \"\",\n    email: \"\",\n    name: \"\",\n  };\n\n  componentDidMount() {\n    database.ref(\"messages\").on(\"value\", (snapshot) => {\n      const messages = obj2Arr(snapshot.val());\n      this.setState({ messages, user: auth.currentUser.displayName });\n    });\n\n    console.log(auth.currentUser);\n  }\n\n  handleChange = (e) => this.setState({ add: e.target.value });\n\n  handleSubmit = () => {\n    const { add: text } = this.state;\n\n    const user = auth.currentUser;\n    const avatar = user && user.photoURL;\n    const email = user && user.email;\n    const name = user && user.displayName;\n\n    const newMessage = { text, avatar, email, name };\n\n    console.log(newMessage);\n\n    this.setState({ add: \"\", avatar, email, name });\n    database.ref(\"messages\").push(newMessage);\n  };\n\n  handleLogout = () => auth.signOut();\n\n  render() {\n    const { messages, add } = this.state;\n    const { handleChange, handleSubmit, handleLogout } = this;\n    return (\n      <>\n        <List>\n          {messages &&\n            messages.map(({ key, text, avatar, name }) => {\n              return (\n                <ListItem key={key}>\n                  <ListItemAvatar>\n                    <Avatar src={avatar} />\n                  </ListItemAvatar>\n                  <ListItemText primary={text} secondary={name} />\n                </ListItem>\n              );\n            })}\n        </List>\n        <TextField value={add} onChange={handleChange} />\n        <Button onClick={handleSubmit}>Send</Button>\n        <Button onClick={handleLogout}>LogOut</Button>\n      </>\n    );\n  }\n}\n\nexport default Chat;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Auth from \"./Auth\";\nimport Chat from \"./Chat\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <Auth>\n      <Chat />\n    </Auth>\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}